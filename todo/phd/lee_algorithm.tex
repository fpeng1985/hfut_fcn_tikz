\documentclass[preview]{standalone}
\usepackage{geometry}

%graphics
\usepackage{xcolor}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, shapes.multipart, arrows, calc, through,intersections}
\usepackage[caption=false,font=footnotesize]{subfig}

\begin{document}

\begin{figure}[!t]
\centering
\subfloat[]{
\begin{tikzpicture}[scale=0.4]

\fill[color=gray!30] (1,4) rectangle (2, 5);
\fill[color=gray!30] (1,6) rectangle (2, 7);
\fill[color=gray!30] (3,4) rectangle (5, 5);
\fill[color=gray!30] (3,6) rectangle (5, 7);

\fill[color=gray!30] (4,11) rectangle (5, 12);
\fill[color=gray!30] (6,11) rectangle (7, 12);
\fill[color=gray!30] (4,14) rectangle (5, 15);
\fill[color=gray!30] (6,14) rectangle (7, 15);

\fill[color=gray!30] (10,7) rectangle (11, 8);
\fill[color=gray!30] (10,5) rectangle (11, 6);
\fill[color=gray!30] (10,3) rectangle (11, 4);
\fill[color=gray!30] (13,7) rectangle (14, 8);
\fill[color=gray!30] (13,5) rectangle (14, 6);
\fill[color=gray!30] (13,3) rectangle (14, 4);

\draw (0,0) grid (17,17);
\draw[fill=white, line width=2pt] (2,3) rectangle ++(2,5);
\draw[fill=white, line width=2pt] (3,12) rectangle ++(5,2);
\draw[fill=white, line width=2pt] (11,2) rectangle ++(2,7);

\node at(10.5, 7.5) {S};
\node at (6.5,11.5) {T};

\node at(10.5, 6.5) {1};
\node at(9.5, 7.5) {1};
\node at(10.5, 8.5) {1};

\node at(9.5, 6.5) {2};
\node at(8.5, 7.5) {2};
\node at(9.5, 8.5) {2};
\node at(10.5, 9.5) {2};

\node at(7.5, 7.5) {3};
\node at(8.5, 8.5) {3};
\node at(8.5, 6.5) {3};
\node at(9.5, 9.5) {3};
\node at(9.5, 5.5) {3};
\node at(10.5, 10.5) {3};
\node at(11.5, 9.5) {3};

\node at(6.5, 7.5) {4};
\node at(7.5, 8.5) {4};
\node at(7.5, 6.5) {4};
\node at(8.5, 9.5) {4};
\node at(8.5, 5.5) {4};
\node at(9.5, 10.5) {4};
\node at(9.5, 4.5) {4};
\node at(10.5, 11.5) {4};
\node at(11.5, 10.5) {4};
\node at(12.5, 9.5) {4};

\node at(5.5, 7.5) {5};
\node at(6.5, 8.5) {5};
\node at(6.5, 6.5) {5};
\node at(7.5, 9.5) {5};
\node at(7.5, 5.5) {5};
\node at(8.5, 10.5) {5};
\node at(8.5, 4.5) {5};
\node at(9.5, 11.5) {5};
\node at(9.5, 3.5) {5};
\node at(10.5, 12.5) {5};
\node at(11.5, 11.5) {5};
\node at(12.5, 10.5) {5};
\node at(13.5, 9.5) {5};
\node at(10.5, 4.5) {5};

\node at(4.5, 7.5) {6};
\node at(5.5, 8.5) {6};
\node at(5.5, 6.5) {6};
\node at(6.5, 9.5) {6};
\node at(6.5, 5.5) {6};
\node at(7.5, 10.5) {6};
\node at(7.5, 4.5) {6};
\node at(8.5, 11.5) {6};
\node at(8.5, 3.5) {6};
\node at(9.5, 12.5) {6};
\node at(9.5, 2.5) {6};
\node at(10.5, 13.5) {6};
\node at(11.5, 12.5) {6};
\node at(12.5, 11.5) {6};
\node at(13.5, 10.5) {6};
\node at(14.5, 9.5) {6};
\node at(13.5, 8.5) {6};

\node at(4.5, 8.5) {7};
\node at(5.5, 9.5) {7};
\node at(6.5, 10.5) {7};
\node at(7.5, 11.5) {7};
\node at(8.5, 12.5) {7};
\node at(9.5, 13.5) {7};
\node at(10.5, 14.5) {7};
\node at(11.5, 13.5) {7};
\node at(12.5, 12.5) {7};
\node at(13.5, 11.5) {7};
\node at(14.5, 10.5) {7};
\node at(15.5, 9.5) {7};
\node at(14.5, 8.5) {7};
\node at(5.5, 5.5) {7};
\node at(6.5, 4.5) {7};
\node at(7.5, 3.5) {7};
\node at(8.5, 2.5) {7};
\node at(9.5, 1.5) {7};
\node at(10.5, 2.5) {7};

\node at(3.5, 8.5) {8};
\node at(4.5, 9.5) {8};
\node at(5.5, 10.5) {8};
\node at(8.5, 13.5) {8};
\node at(9.5, 14.5) {8};
\node at(10.5, 15.5) {8};
\node at(11.5, 14.5) {8};
\node at(12.5, 13.5) {8};
\node at(13.5, 12.5) {8};
\node at(14.5, 11.5) {8};
\node at(15.5, 10.5) {8};
\node at(16.5, 9.5) {8};
\node at(15.5, 8.5) {8};
\node at(14.5, 7.5) {8};
\node at(4.5, 5.5) {8};
\node at(5.5, 4.5) {8};
\node at(6.5, 3.5) {8};
\node at(7.5, 2.5) {8};
\node at(8.5, 1.5) {8};
\node at(9.5, 0.5) {8};
\node at(10.5, 1.5) {8};
\end{tikzpicture}
}
\hfil
\subfloat[]{
\begin{tikzpicture}[scale=0.4]

\fill[color=gray!30] (1,4) rectangle (2, 5);
\fill[color=gray!30] (1,6) rectangle (2, 7);
\fill[color=gray!30] (3,4) rectangle (5, 5);
\fill[color=gray!30] (3,6) rectangle (5, 7);

\fill[color=gray!30] (4,11) rectangle (5, 12);
\fill[color=gray!30] (6,11) rectangle (7, 12);
\fill[color=gray!30] (4,14) rectangle (5, 15);
\fill[color=gray!30] (6,14) rectangle (7, 15);

\fill[color=gray!30] (10,7) rectangle (11, 8);
\fill[color=gray!30] (10,5) rectangle (11, 6);
\fill[color=gray!30] (10,3) rectangle (11, 4);
\fill[color=gray!30] (13,7) rectangle (14, 8);
\fill[color=gray!30] (13,5) rectangle (14, 6);
\fill[color=gray!30] (13,3) rectangle (14, 4);

\fill[color=gray](10,7) rectangle ++(-4,1) rectangle ++ (1,3);

\draw (0,0) grid (17,17);
\draw[fill=white, line width=2pt] (2,3) rectangle ++(2,5);
\draw[fill=white, line width=2pt] (3,12) rectangle ++(5,2);
\draw[fill=white, line width=2pt] (11,2) rectangle ++(2,7);

\node at(10.5, 7.5) {S};
\node at (6.5,11.5) {T};

\node at(10.5, 6.5) {1};
\node at(9.5, 7.5) {1};
\node at(10.5, 8.5) {1};

\node at(9.5, 6.5) {2};
\node at(8.5, 7.5) {2};
\node at(9.5, 8.5) {2};
\node at(10.5, 9.5) {2};

\node at(7.5, 7.5) {3};
\node at(8.5, 8.5) {3};
\node at(8.5, 6.5) {3};
\node at(9.5, 9.5) {3};
\node at(9.5, 5.5) {3};
\node at(10.5, 10.5) {3};
\node at(11.5, 9.5) {3};

\node at(6.5, 7.5) {4};
\node at(7.5, 8.5) {4};
\node at(7.5, 6.5) {4};
\node at(8.5, 9.5) {4};
\node at(8.5, 5.5) {4};
\node at(9.5, 10.5) {4};
\node at(9.5, 4.5) {4};
\node at(10.5, 11.5) {4};
\node at(11.5, 10.5) {4};
\node at(12.5, 9.5) {4};

\node at(5.5, 7.5) {5};
\node at(6.5, 8.5) {5};
\node at(6.5, 6.5) {5};
\node at(7.5, 9.5) {5};
\node at(7.5, 5.5) {5};
\node at(8.5, 10.5) {5};
\node at(8.5, 4.5) {5};
\node at(9.5, 11.5) {5};
\node at(9.5, 3.5) {5};
\node at(10.5, 12.5) {5};
\node at(11.5, 11.5) {5};
\node at(12.5, 10.5) {5};
\node at(13.5, 9.5) {5};
\node at(10.5, 4.5) {5};

\node at(4.5, 7.5) {6};
\node at(5.5, 8.5) {6};
\node at(5.5, 6.5) {6};
\node at(6.5, 9.5) {6};
\node at(6.5, 5.5) {6};
\node at(7.5, 10.5) {6};
\node at(7.5, 4.5) {6};
\node at(8.5, 11.5) {6};
\node at(8.5, 3.5) {6};
\node at(9.5, 12.5) {6};
\node at(9.5, 2.5) {6};
\node at(10.5, 13.5) {6};
\node at(11.5, 12.5) {6};
\node at(12.5, 11.5) {6};
\node at(13.5, 10.5) {6};
\node at(14.5, 9.5) {6};
\node at(13.5, 8.5) {6};

\node at(4.5, 8.5) {7};
\node at(5.5, 9.5) {7};
\node at(6.5, 10.5) {7};
\node at(7.5, 11.5) {7};
\node at(8.5, 12.5) {7};
\node at(9.5, 13.5) {7};
\node at(10.5, 14.5) {7};
\node at(11.5, 13.5) {7};
\node at(12.5, 12.5) {7};
\node at(13.5, 11.5) {7};
\node at(14.5, 10.5) {7};
\node at(15.5, 9.5) {7};
\node at(14.5, 8.5) {7};
\node at(5.5, 5.5) {7};
\node at(6.5, 4.5) {7};
\node at(7.5, 3.5) {7};
\node at(8.5, 2.5) {7};
\node at(9.5, 1.5) {7};
\node at(10.5, 2.5) {7};

\node at(3.5, 8.5) {8};
\node at(4.5, 9.5) {8};
\node at(5.5, 10.5) {8};
\node at(8.5, 13.5) {8};
\node at(9.5, 14.5) {8};
\node at(10.5, 15.5) {8};
\node at(11.5, 14.5) {8};
\node at(12.5, 13.5) {8};
\node at(13.5, 12.5) {8};
\node at(14.5, 11.5) {8};
\node at(15.5, 10.5) {8};
\node at(16.5, 9.5) {8};
\node at(15.5, 8.5) {8};
\node at(14.5, 7.5) {8};
\node at(4.5, 5.5) {8};
\node at(5.5, 4.5) {8};
\node at(6.5, 3.5) {8};
\node at(7.5, 2.5) {8};
\node at(8.5, 1.5) {8};
\node at(9.5, 0.5) {8};
\node at(10.5, 1.5) {8};

\end{tikzpicture}
}
\end{figure}

\end{document}
